function source_if_exists { [ -f $1 ] && source $1 }
function short_hostname { hostname -s }

function gr {
  local git_root
  git_root=$(git rev-parse --git-dir 2> /dev/null)
  if [ ! -z $git_root ]; then
    readlink -f $(dirname $git_root)
  else
    false
  fi
}

function cr { cd $(gr || echo '.')/$1 }
function env { /usr/bin/env | sort }

# today's date formatted in ISO standard. If an argument is passed then
# it is treated as a day and added or subtracted to the date.
# See http://www.walkernews.net/2007/06/03/date-arithmetic-in-linux-shell-scripts/
function today {
  format='%Y%m%d'
  [ -z $1 ] && date +$format || date -d "$[$1 * -1] day ago" +$format
}

function now { date $1 +%Y%m%dT%H%M%S }

# vim:ft=zsh
